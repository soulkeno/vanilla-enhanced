
<!DOCTYPE html><!-- Last Published: Wed Aug 13 2025 20:44:54 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="quests.medal.tv" data-wf-page="6892190da19a4760c2681558" data-wf-site="6756f478be66e4f7aa3a0203" lang="en-US"><head><meta charset="utf-8"/><title>Get 3 Skeleton Spawners on DonutSMP | Medal.tv</title><meta content="Use Medal to clip and record your favorite moments on DonutSMP and receive 3x Skeleton Spawners" name="description"/><meta content="Free Skeleton Spawners | Medal x DonutSMP" property="og:title"/><meta content="Use Medal to clip and record your favorite moments on DonutSMP and receive 3 Skeleton Spawners" property="og:description"/><meta content="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689c979fc3202f5bc8918429_Screenshot%202025-08-13%20094757.png" property="og:image"/><meta content="Free Skeleton Spawners | Medal x DonutSMP" property="twitter:title"/><meta content="Use Medal to clip and record your favorite moments on DonutSMP and receive 3 Skeleton Spawners" property="twitter:description"/><meta content="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689c979fc3202f5bc8918429_Screenshot%202025-08-13%20094757.png" property="twitter:image"/><meta property="og:type" content="website"/><meta content="summary_large_image" name="twitter:card"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/css/medal-feather.shared.8fd8813d3.css" rel="stylesheet" type="text/css"/><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/6850841436502c943536679f_favicon-32x32.png" rel="shortcut icon" type="image/x-icon"/><link href="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68508417d3b282a7a900bc6b_MedalApp.png" rel="apple-touch-icon"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-S4DL5Y9VG5"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('set', 'developer_id.dZGVlNj', true);gtag('config', 'G-S4DL5Y9VG5');</script></head><body class="body"><div class="navbar-logo-left"><div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-logo-left-container shadow-three mobilenav w-nav"><div class="container-3"><div class="navbar-wrapper"><a href="#" class="navbar-brand w-nav-brand"><div class="w-embed"><svg width="106" height="27" viewBox="0 0 106 27" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_27521_3388)">
<path d="M10.8669 23.7436L17.4448 19.9968C17.9809 19.6901 17.9767 18.914 17.4343 18.6178L10.7584 14.9523C10.3161 14.7103 9.77577 15.0295 9.77577 15.5343V23.1115C9.77577 23.6727 10.3808 24.0232 10.8669 23.7457V23.7436Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M30.864 23.7436L24.2862 19.9968C23.75 19.6901 23.7542 18.914 24.2966 18.6178L30.9725 14.9523C31.4148 14.7103 31.9551 15.0295 31.9551 15.5343V23.1115C31.9551 23.6727 31.3501 24.0232 30.864 23.7457V23.7436Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M41.0687 4.84589L35.5337 1.51819C35.1331 1.27826 34.6324 1.272 34.2277 1.50359L21.501 8.78907C21.0963 9.02065 20.5997 9.02065 20.195 8.78907L7.46624 1.50567C7.06149 1.27409 6.56077 1.27826 6.16019 1.52028L0.62306 4.84589C0.22457 5.08582 -0.0195312 5.51561 -0.0195312 5.98086V21.3551C-0.0195312 21.7974 0.207879 22.2105 0.581333 22.4483L5.32357 25.4526C5.42163 25.5152 5.61775 25.6362 5.84098 25.776C6.31458 26.0702 6.92588 25.728 6.9217 25.171C6.9217 24.9331 6.9217 24.7161 6.9217 24.5826L6.94674 10.8963C6.94674 10.1702 7.73329 9.71749 8.36336 10.0784L20.1595 16.859C20.5851 17.1031 21.1067 17.1031 21.5302 16.859L33.3264 10.0784C33.9564 9.71749 34.7409 10.1702 34.743 10.8963L34.768 24.5826C34.768 24.7036 34.7701 24.9248 34.7722 25.1751C34.7764 25.728 35.3856 26.066 35.855 25.7718C36.0657 25.6404 36.2577 25.5215 36.3661 25.4526L41.1084 22.4483C41.4818 22.2105 41.7093 21.7994 41.7093 21.3551V5.98086C41.7093 5.51561 41.4651 5.08374 41.0667 4.84589H41.0687Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M105.866 6.49805V20.858H103.328V6.49805H105.866Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M95.0884 21.0758C94.4059 21.0758 93.7912 20.9542 93.2443 20.7112C92.7021 20.4634 92.272 20.0988 91.9542 19.6173C91.641 19.1359 91.4844 18.5422 91.4844 17.8364C91.4844 17.2287 91.5966 16.7262 91.8209 16.3289C92.0453 15.9315 92.3515 15.6137 92.7395 15.3753C93.1274 15.1369 93.5645 14.9569 94.0507 14.8354C94.5415 14.7092 95.0486 14.618 95.5722 14.5619C96.2032 14.4965 96.7151 14.4381 97.1077 14.3866C97.5004 14.3305 97.7855 14.2464 97.9632 14.1342C98.1455 14.0174 98.2366 13.8374 98.2366 13.5943V13.5522C98.2366 13.024 98.08 12.615 97.7668 12.3252C97.4536 12.0354 97.0026 11.8905 96.4136 11.8905C95.7919 11.8905 95.2987 12.026 94.9341 12.2972C94.5742 12.5683 94.3311 12.8885 94.2049 13.2578L91.835 12.9212C92.0219 12.2668 92.3305 11.7199 92.7605 11.2805C93.1906 10.8364 93.7164 10.5045 94.3381 10.2848C94.9598 10.0604 95.647 9.94824 96.3996 9.94824C96.9184 9.94824 97.435 10.009 97.9491 10.1305C98.4633 10.2521 98.9331 10.4531 99.3585 10.7335C99.7839 11.0093 100.125 11.3856 100.382 11.8624C100.644 12.3392 100.775 12.9352 100.775 13.6504V20.8584H98.3348V19.3789H98.2506C98.0964 19.6781 97.879 19.9586 97.5986 20.2203C97.3228 20.4774 96.9745 20.6855 96.5538 20.8444C96.1378 20.9986 95.6493 21.0758 95.0884 21.0758ZM95.7475 19.2107C96.257 19.2107 96.6987 19.1102 97.0727 18.9092C97.4466 18.7035 97.7341 18.4324 97.9351 18.0958C98.1408 17.7592 98.2436 17.3923 98.2436 16.995V15.7259C98.1642 15.7913 98.0286 15.8521 97.837 15.9082C97.65 15.9643 97.4396 16.0133 97.2059 16.0554C96.9722 16.0975 96.7408 16.1349 96.5118 16.1676C96.2827 16.2003 96.084 16.2284 95.9158 16.2517C95.5371 16.3032 95.1982 16.3873 94.8991 16.5042C94.5999 16.621 94.3638 16.7846 94.1909 16.995C94.0179 17.2007 93.9315 17.4671 93.9315 17.7943C93.9315 18.2618 94.1021 18.6147 94.4433 18.8531C94.7845 19.0915 95.2193 19.2107 95.7475 19.2107Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M83.5497 21.0473C82.7036 21.0473 81.9464 20.8299 81.2779 20.3952C80.6095 19.9605 80.0813 19.3294 79.6933 18.502C79.3053 17.6747 79.1113 16.6697 79.1113 15.487C79.1113 14.2904 79.3077 13.2807 79.7003 12.458C80.0976 11.6306 80.6329 11.0066 81.306 10.5859C81.9791 10.1605 82.7294 9.94779 83.5567 9.94779C84.1878 9.94779 84.7066 10.0553 85.1133 10.2703C85.52 10.4807 85.8425 10.7354 86.0809 11.0346C86.3193 11.3291 86.504 11.6072 86.6349 11.869H86.74V6.49805H89.2853V20.858H86.7891V19.1611H86.6349C86.504 19.4229 86.3147 19.701 86.0669 19.9955C85.8192 20.2853 85.492 20.5331 85.0853 20.7388C84.6786 20.9444 84.1667 21.0473 83.5497 21.0473ZM84.2579 18.9648C84.7955 18.9648 85.2536 18.8199 85.6322 18.5301C86.0108 18.2356 86.2983 17.8266 86.4946 17.303C86.6909 16.7795 86.7891 16.1695 86.7891 15.473C86.7891 14.7765 86.6909 14.1712 86.4946 13.657C86.303 13.1428 86.0178 12.7431 85.6392 12.458C85.2652 12.1728 84.8048 12.0303 84.2579 12.0303C83.6923 12.0303 83.2202 12.1775 82.8415 12.472C82.4629 12.7665 82.1778 13.1732 81.9861 13.692C81.7945 14.2109 81.6986 14.8045 81.6986 15.473C81.6986 16.1461 81.7945 16.7468 81.9861 17.275C82.1824 17.7985 82.4699 18.2122 82.8486 18.5161C83.2319 18.8152 83.7016 18.9648 84.2579 18.9648Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M72.6165 21.0688C71.5367 21.0688 70.6041 20.8444 69.8188 20.3956C69.0382 19.9422 68.4375 19.3018 68.0168 18.4744C67.5961 17.6424 67.3857 16.6631 67.3857 15.5365C67.3857 14.4287 67.5961 13.4564 68.0168 12.6197C68.4422 11.7783 69.0358 11.1239 69.7978 10.6564C70.5597 10.1843 71.4549 9.94824 72.4832 9.94824C73.147 9.94824 73.7734 10.0558 74.3624 10.2708C74.956 10.4811 75.4796 10.8083 75.933 11.2524C76.3911 11.6965 76.751 12.2621 77.0128 12.9492C77.2745 13.6317 77.4054 14.4451 77.4054 15.3893V16.1676H68.5777V14.4568H74.9724C74.9677 13.9706 74.8625 13.5382 74.6569 13.1596C74.4512 12.7763 74.1637 12.4748 73.7944 12.2551C73.4298 12.0354 73.0044 11.9255 72.5183 11.9255C71.9994 11.9255 71.5437 12.0517 71.151 12.3042C70.7584 12.5519 70.4522 12.8791 70.2325 13.2858C70.0175 13.6878 69.9076 14.1295 69.9029 14.611V16.1045C69.9029 16.7309 70.0175 17.2684 70.2465 17.7172C70.4756 18.1613 70.7958 18.5025 71.2071 18.7409C71.6185 18.9746 72.0999 19.0915 72.6515 19.0915C73.0208 19.0915 73.355 19.04 73.6542 18.9372C73.9533 18.8297 74.2128 18.6731 74.4325 18.4674C74.6522 18.2618 74.8181 18.007 74.9303 17.7032L77.3003 17.9696C77.1507 18.596 76.8655 19.1429 76.4448 19.6103C76.0288 20.0731 75.4959 20.433 74.8462 20.6901C74.1964 20.9426 73.4532 21.0688 72.6165 21.0688Z" fill="white" style="fill:white;fill-opacity:1;"/>
<path d="M50.0674 6.49805H53.2507L57.5138 16.9034H57.6821L61.9452 6.49805H65.1285V20.858H62.6323V10.9925H62.4991L58.5305 20.8159H56.6654L52.6968 10.9715H52.5635V20.858H50.0674V6.49805Z" fill="white" style="fill:white;fill-opacity:1;"/>
</g>
<defs>
<clipPath id="clip0_27521_3388">
<rect width="106" height="25.2177" fill="white" style="fill:white;fill-opacity:1;" transform="translate(0 1)"/>
</clipPath>
</defs>
</svg></div></a><nav role="navigation" class="nav-menu-wrapper w-nav-menu"><ul role="list" class="nav-menu-two w-list-unstyled"><li class="list-item"><a href="https://medal.tv/features" target="_blank" class="nav-link-accent">Features</a><a href="https://medal.tv/games" target="_blank" class="nav-link-accent">Games</a><a href="https://medal.tv/premium" target="_blank" class="nav-link-accent">Premium</a></li></ul></nav><div class="menu-button w-nav-button"><div class="icon-2 w-icon-nav-menu"></div></div></div></div></div></div><section class="hero-heading-left"><div class="container"><div class="hero-wrapper-3 mobile donut"><div class="hero-split"><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68921b330182942c9735bf1a_New%20Project%20(1).png" loading="lazy" sizes="100vw" srcset="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68921b330182942c9735bf1a_New%20Project%20(1)-p-500.png 500w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68921b330182942c9735bf1a_New%20Project%20(1)-p-800.png 800w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68921b330182942c9735bf1a_New%20Project%20(1)-p-1080.png 1080w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68921b330182942c9735bf1a_New%20Project%20(1).png 1500w" alt="" class="image-15"/><div class="limited-time">QUEST IS AVAILABLE FOR NEW USERS ONLY</div><h1 class="heading-2 purpleprison">Record on <span class="text-span-14">DonutSMP</span> using <span class="text-span-2">Medal </span>to unlock rewards.</h1><a href="https://install.medal.tv/?ref=mc_donut" target="_blank" class="download-button download-button-2 w-button">Download Medal on PC</a><p class="margin-bottom-24px-4">This quest is only available on PC for a Limited Time</p></div><div class="hero-split"><div data-delay="1000" data-animation="slide" class="slider w-slider" data-autoplay="true" data-easing="linear" data-hide-arrows="true" data-disable-swipe="false" data-autoplay-limit="0" data-nav-spacing="3" data-duration="500" data-infinite="true"><div class="mask w-slider-mask"><div class="slide complex w-slide"><h1 class="heading-2 reward-title title purpleprison">Free <span class="text-span-21">3x Skeleton Spawners</span></h1><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/68980ea0e2a5a74bacec019e_Skeleton_Spawner.webp" loading="lazy" width="243" alt="" class="image-9 image-reward"/></div></div><div class="w-slider-arrow-left"></div><div class="w-slider-arrow-right"></div></div></div></div></div></section><section class="step-3"><div class="w-layout-blockcontainer w-container"><div class="hero-wrapper"><div class="step-1-split"><img loading="lazy" src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/6756f478be66e4f7aa3a020f_mchead.avif" alt="" class="image-12"/><h1 class="heading-6 tutorial">Tutorial Video</h1><div style="padding-top:75%" class="video w-video w-embed"><iframe class="embedly-embed" src="//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FsV2ACZHr7Kg%3Ffeature%3Doembed&display_name=YouTube&url=https%3A%2F%2Fwww.youtube.com%2Fshorts%2FsV2ACZHr7Kg%3Ffeature%3Dshare&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FsV2ACZHr7Kg%2Fhq2.jpg&type=text%2Fhtml&schema=youtube" width="940" height="705" scrolling="no" allowfullscreen title="How to get 3 free skeleton spawners on DonutSMP! #minecraft #minecraftmemes"></iframe></div><h1 class="heading-6 scroll-down">üñ±Ô∏èScroll Down for <span class="text-span-16">Step by Step üëá</span></h1></div></div></div><div class="header-hero-container"><div class="hero-wrapper-2"><div class="number">1 </div><div class="div-block"><h3 class="heading-3">Download and Install <span class="text-span-3">Medal</span></h3><p class="paragraph-3">If you don‚Äôt already use Medal, it‚Äôs the best way to record and edit Minecraft videos. You must install it on PC for this offer, you will not see the quest on mobile.<br/></p><div class="limited-time">QUEST IS AVAILABLE FOR NEW USERS ONLY</div><a href="https://install.medal.tv/?ref=mc_donut" target="_blank" class="download-button download-button-2 w-button">Download Medal on PC</a></div><div class="step-1-split"><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/685073d5c024e4491c301b1f_Frame%20522875.png" loading="lazy" width="540" sizes="(max-width: 767px) 100vw, 540px" alt="" srcset="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/685073d5c024e4491c301b1f_Frame%2520522875-p-500.png 500w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/685073d5c024e4491c301b1f_Frame%2520522875-p-800.png 800w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/685073d5c024e4491c301b1f_Frame%20522875.png 1000w" class="shadow-two-2"/></div></div></div></section><section class="step-3"><div class="header-hero-container"><div class="hero-wrapper-2"><div class="number">2 </div><div class="div-block"><h3 class="heading-3">Start the DonutSMP Quest</h3><p class="paragraph-3">After installing Medal on PC, go to Home in the Medal app and then navigate to the Quests sidebar on the right. Click on DonutSMP x Medal quest and click &quot;Start Quest&quot;</p></div><div class="step-1-split"><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce09a209c1152a9c2900c_startquest.png" loading="lazy" width="540" sizes="(max-width: 767px) 100vw, 540px" alt="" srcset="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce09a209c1152a9c2900c_startquest-p-500.png 500w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce09a209c1152a9c2900c_startquest.png 650w" class="shadow-two-2"/></div></div></div></section><section class="step-3"><div class="header-hero-container"><div class="hero-wrapper-2"><div class="number">3 </div><div class="div-block"><h3 class="heading-3">Save a Clip while on DonutSMP</h3><p class="paragraph-3">Once the quest is started, launch Minecraft and log in to <strong>donutsmp.net</strong> then press F8 to save the past 15s of gameplay. Once you capture a clip, post it to your profile with hashtag #donutsmp in the description.</p></div><div class="step-1-split"><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/6756f478be66e4f7aa3a021d_image%20(6).png" loading="lazy" width="540" sizes="(max-width: 767px) 100vw, 540px" alt="" srcset="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/6756f478be66e4f7aa3a021d_image%2520(6)-p-500.png 500w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/6756f478be66e4f7aa3a021d_image%2520(6)-p-800.png 800w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/6756f478be66e4f7aa3a021d_image%20(6).png 1000w" class="shadow-two-2"/></div></div><div class="hero-wrapper-2"><div class="number">4</div><div class="div-block"><h3 class="heading-3">Complete Quest on Medal</h3><p class="paragraph-3">Once you&#x27;ve posted your clip, go to the Medal homepage and look for the DonutSMP quest in the sidebar. Enter your Minecraft username that you want to claim the reward for then click submit.</p></div><div class="step-1-split"><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce12c9760de1f7bed02e0_Screenshot%202025-08-13%20at%203.01.52%20PM.png" loading="lazy" width="540" sizes="(max-width: 767px) 100vw, 540px" alt="" srcset="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce12c9760de1f7bed02e0_Screenshot%202025-08-13%20at%203.01.52%20PM-p-500.png 500w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce12c9760de1f7bed02e0_Screenshot%202025-08-13%20at%203.01.52%20PM.png 658w" class="shadow-two-2"/></div></div><div class="hero-wrapper-2"><div class="number">5</div><div class="div-block"><h3 class="heading-3">Claim your reward on DonutSMP</h3><p class="paragraph-3">Once you have entered your username on the Medal quest, now go back to DonutSMP and then type the command <strong>/medal </strong>to redeem your spawners!<br/><br/>You can redeem a new reward every week by repeating these steps!</p></div><div class="step-1-split"><img src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce1391d892ace6258962c_Screenshot%202025-08-13%20at%203.01.48%20PM.png" loading="lazy" width="540" sizes="(max-width: 767px) 100vw, 540px" alt="" srcset="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce1391d892ace6258962c_Screenshot%202025-08-13%20at%203.01.48%20PM-p-500.png 500w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce1391d892ace6258962c_Screenshot%202025-08-13%20at%203.01.48%20PM-p-800.png 800w, https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/689ce1391d892ace6258962c_Screenshot%202025-08-13%20at%203.01.48%20PM.png 878w" class="shadow-two-2"/></div></div></div></section><div class="hero-center-text"><h2 class="every-week-header"><span class="more-ram-subtext">‚Äç</span></h2></div><div class="div-block-2"><a href="https://install.medal.tv/?ref=mc_donut" target="_blank" class="download-button purple download-button-2 w-button">Download Medal</a></div><script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6756f478be66e4f7aa3a0203" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/js/medal-feather.schunk.fb28fe0fe28a6845.js" type="text/javascript"></script><script src="https://cdn.prod.website-files.com/6756f478be66e4f7aa3a0203/js/medal-feather.ac711976.eb122c85c315ebe0.js" type="text/javascript"></script><!-- js-cookie dependency - can inline since it's pretty small eventually -->
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
  <script src="https://cdn.amplitude.com/libs/analytics-browser-2.11.7-min.js.gz"></script>
  <!-- amplitude initialization compatible with medal user system -->
  <script>
    const AMPLITUDE_API_KEY_TEST = '697218cdaa01dc443b64bd078f7ce887'
    const AMPLITUDE_API_KEY_PROD = '68186c87b60ddd1c4a29e7be15fa7d7f'

    const API_USER_AGENT = 'Medal-webflow/1.0 (string_id; simplified_signup; no_upscale; markdown)'
    const DEFAULT_REF = location.href.includes('donut') ? 'mc_donut' : 'quest_landing'

    const COOKIE_DURATION_IN_DAYS = 180
    const AUTH_COOKIE_OPTIONS = {
      expires: COOKIE_DURATION_IN_DAYS,
      secure: true,
      sameSite: 'None',
      domain: 'medal.tv'
    }

    function encodeAuthCookie(val) {
      return btoa(JSON.stringify(val))
    }
    function decodeAuthCookie(str) {
      try {
        return JSON.parse(atob(str))
      } catch (err) {
        console.warn('Failed to decode cookie object', err)
        return null
      }
    }

    // confess: copied from web, don't know the history of the cookie format or why so many repeated fields
    function setAuthCookie(key, userId, additionalProps) {
      const newAuthObject = {
        ...additionalProps,
        userId,
        id: userId,
        key,
        auth: {
          key,
          userId
        }
      }

      if (!newAuthObject.userId || !newAuthObject.key) {
        console.warn('Error updating user cookie.', {
          newAuthObject
        })
        return
      }

      console.debug('setting medal-auth cookie:', newAuthObject)
      Cookies.set('medal-auth', encodeAuthCookie(newAuthObject), AUTH_COOKIE_OPTIONS)
      Cookies.set('medal-auth-guest', !(newAuthObject?.registeredUser ?? false), AUTH_COOKIE_OPTIONS)
    }

    function getMedalUserFromCookie() {
      // Check for the medal auth cookie which stores info about current user
      const medalAuthValue = Cookies.get('medal-auth')
      console.debug('medal-auth cookie value:', medalAuthValue)

      if (!medalAuthValue) {
        return null
      }

      return decodeAuthCookie(medalAuthValue)
    }

    async function apiCreateGuestUser() {
      console.debug('apiCreateGuestUser')
      const userData = {
        email: 'guest',
        userName: 'guest',
        password: crypto.randomUUID()
      }

      try {
        const response = await fetch('https://medal.tv/api/users', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Medal-User-Agent': API_USER_AGENT
          },
          body: JSON.stringify(userData)
        });

        if (!response.ok) {
          throw new Error(`Error: ${response.status} - ${response.statusText}`)
        }

        const responseData = await response.json()
        console.log('Guest user created successfully:', responseData)
        return responseData;
      } catch (error) {
        console.error('Failed to create guest user:', error)
        throw error;
      }
    }

    async function createGuestUserAndSetAuthCookie() {
      console.debug('createGuestUserAndSetAuthCookie')
      const guestUser = await apiCreateGuestUser()

      console.debug('createGuestUserAndSetAuthCookie - guestUser:', guestUser)

      setAuthCookie(guestUser?.auth?.key, guestUser?.auth?.userId, {
        registeredUser: false
      })
    }

    async function getMedalUser() {
      console.debug('getMedalUser')
      // if we already have a medal-auth cookie we use that value

      let medalUser = getMedalUserFromCookie()
      console.debug('medal user 1:', medalUser)

      if (!medalUser) {
        await createGuestUserAndSetAuthCookie()
        medalUser = getMedalUserFromCookie()
      }

      console.debug('medal user 2:', medalUser)

      return medalUser
    }

    function initializeAmplitude(medalUserId, isGuest) {
      console.debug('initializeAmplitude - medalUserId:', medalUserId, 'isGuest:', isGuest)
      const options = {
        apiEndpoint: 'ampltd2.medal.tv',
        // autocapture is on, if a device or userid is not set during init, amplitude will generate a new random one
        // and attribute events to that generated device ID instead of the correct guest user or logged-in user
        autocapture: true,
        cookieOptions: {
          // make sure amplitude cookies are set on the top level domain so they are picked up when going to main site too
          domain: 'medal.tv'
        }
      }

      if (isGuest) {
        // important: guest user ids get put into deviceId, not userId
        options.deviceId = medalUserId
      } else {
        options.userId = medalUserId
      }

      amplitude.init(AMPLITUDE_API_KEY_PROD, options)

	  if (isGuest) {
        // only attribute the quest page ref to new users coming through this funnel
        console.debug('setting user ref to:', DEFAULT_REF)
        const identifyEvent = new amplitude.Identify()
        identifyEvent.set('ref', DEFAULT_REF)
		amplitude.identify(identifyEvent)
      }
    }
    
    function addUserAttributionToInstallLinks(medalUserId, isGuest) {
      console.log('addUserAttributionToInstallLinks - medalUserId:', medalUserId, 'isGuest:', isGuest)
      // Find all anchor elements on the page
	  const links = document.querySelectorAll('a[href^="https://install.medal.tv"]')
      // Iterate through each link
      links.forEach(link => {
        const href = link.getAttribute('href');
        
        // append query parameters for tracking
        const linkUrl = new URL(href)
        // these parameters get baked into the file download name and picked up in the installer
        // which lets us attribute registrations after install back to this user/ref
        linkUrl.searchParams.set('uid', medalUserId)
        linkUrl.searchParams.set('guest', isGuest)
		if (!linkUrl.searchParams.has('ref')) {
          linkUrl.searchParams.set('ref', DEFAULT_REF) 
        }
        
        const ref = linkUrl.searchParams.get('ref')
        
        const updatedHref = linkUrl.toString()
        console.log('found link:', href, 'replaced:', updatedHref)
        link.setAttribute('href', updatedHref)

		// trigger amplitude event for downloading installer
		link.addEventListener('click', () => {
          console.log('track download installer clicked - ref:', ref)
          if (isGuest) {
            // change the user ref to the specific landing page ref if it exists
            console.debug('setting user ref to:', ref)
            const identifyEvent = new amplitude.Identify()
            identifyEvent.set('ref', ref)
            amplitude.identify(identifyEvent)
          }
          
          amplitude.track('downloadInstaller', {
            platform: 'web-quests',
            ref,
            targetPlatform: 'windows',
            pageType: 'Quest Landing Page',
            route: window.location.href,
            href: window.location.href,
            appPath: window.location.pathname,
            appPathWithoutLocale: window.location.pathname,
            accountType: isGuest ? 'Guest' : 'User'
          })
        })
      });
    }


    // Usage example
    getMedalUser().then(medalAuthData => {
      console.log('medalAuthData:', medalAuthData);
      console.log('Initializing amplitude')

      const medalUserId = medalAuthData.userId
      const isGuest = !medalAuthData.registeredUser
      
      initializeAmplitude(medalUserId, isGuest)
      
      addUserAttributionToInstallLinks(medalUserId, isGuest)
    }).catch(error => {
      console.error('Error getting medal user:', error);
    });
  </script></body></html>
